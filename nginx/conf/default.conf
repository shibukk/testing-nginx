upstream app {
    server host.docker.internal:8080;
}

log_format  tracking  '$upstream_http_x_app_user_id\t$time_local\t'
                  '"$request"\t$status\t"$http_referer"\t"$http_user_agent"'
                  ;

access_log  /var/log/nginx/track.log  tracking;

server {
    listen 80;
    server_name localhost;
    location / {
        proxy_pass http://app;
        proxy_hide_header X-APP-USER-ID;
    }
}